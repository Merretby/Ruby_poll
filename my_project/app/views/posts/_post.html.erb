<div id="<%= dom_id(post) %>" class="bg-white rounded-lg shadow hover:shadow-lg transition p-6 aspect-square flex flex-col">
  <h2 class="text-xl font-bold text-gray-900 mb-2 line-clamp-2">
    <%= link_to post.title, post, data: { turbo_frame: "_top" }, class: 'hover:text-blue-600' %>
  </h2>
  
  <p class="text-sm text-gray-600 mb-3">By <%= post.user.author_name %></p>
  
  <p class="text-gray-700 mb-4 flex-grow line-clamp-3"><%= truncate(post.body, length: 100) %></p>
  
  <div class="mb-4">
    <%= turbo_frame_tag dom_id(post, :status) do %>
      <% if post.published_at %>
        <span class="inline-block px-2 py-1 text-xs bg-green-100 text-green-800 rounded">Published <%= time_ago_in_words(post.published_at) %> ago</span>
      <% else %>
        <span class="inline-block px-2 py-1 text-xs bg-gray-100 text-gray-800 rounded">Draft</span>
      <% end %>
    <% end %>
  </div>
  
  <div class="mb-3 flex items-center text-sm text-gray-600">
    <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"></path>
    </svg>
    <%= pluralize(post.comments.count, 'comment') %>
  </div>
  
  <div class="flex gap-2 pt-4 border-t border-gray-200 mt-auto">
    <%= link_to 'View', post, data: { turbo_frame: "_top" }, class: 'flex-1 text-center px-3 py-2 text-sm text-blue-600 hover:bg-blue-50 rounded' %>
    <% if allowed_to?(:update?, post) %>
      <%= link_to 'Edit', edit_post_path(post), data: { turbo_frame: "posts" }, class: 'flex-1 text-center px-3 py-2 text-sm text-yellow-600 hover:bg-yellow-50 rounded' %>
    <% end %>
    <% if allowed_to?(:destroy?, post) %>
      <%= button_to 'Delete', post, method: :delete, class: 'flex-1 px-3 py-2 text-sm text-red-600 hover:bg-red-50 rounded border-0 bg-transparent cursor-pointer' %>
    <% end %>
  </div>
</div>